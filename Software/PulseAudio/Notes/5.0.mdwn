[[!inline pages="Software/PulseAudio/TOC" quick="yes" raw="yes"]]

# PulseAudio 5.0 Release Notes (draft)

Draft status: checked commits since v4.0 until b76b9c32d9172a88efad7cb74c3a5c8cf893014a

## Changes at a glance

* BlueZ 5 support (A2DP only)


## Notes for Application Developers

TODO: libpulse API changes go here.


## Notes for Packagers

PulseAudio now supports BlueZ 5, but only the A2DP profile. BlueZ 4 is still the only way to make HSP/HFP work.

We now use upstream gettext instead of the GLib version. The minimum required version is 0.18.1.

The minimum supported alsa-lib version is now 1.0.19 (down from 1.0.24).


## Changes in More Detail

### BlueZ 5 support (A2DP only)

TODO: This is one of the most significant changes in this release. We already have a note for packagers above, but we probably should have some longer explanation here about what makes BlueZ 5 so great for users, and also what doesn't work and why. And what is required for the not-yet-working stuff to start working.


### Utility changes:

pacmd now supports "newfile:somefile.log" as a target for the set-log-target command. "newfile:somefile.log" means that somefile.log will not be overwritten if it already exists. Instead, a new file with name somefile.log.1 will be created. The "newfile:" target was already supported in the daemon configuration file, this change just brings pacmd to the same level.


### Module changes:

TODO: New modules, new module arguments etc. shall be noted here.


### Configuration changes:

In path configuration files (/usr/share/pulseaudio/alsa-mixer/paths/*) the "name" option in the "General" section is not supported any more. The path name is now determined solely based on the file name. The "name" option was also used as a key to a table containing path descriptions, and that functionality is now provided by a new option called "description-key".

A single path can't be used for both input and output any more.


### Hardware support changes:

Jack detection support for line out jacks has been added. TODO: Any concrete benefits for users?

A configuration file for Native Instruments Traktor Audio 2 was missing from the 4.0 tarball. It's now shipped with 5.0, so users of that hardware actually get the benefit from the configuration file (which allows PulseAudio to use both outputs of the sound card).


### libpulse changes:

New function: pa_threaded_mainloop_set_name(). This is used internally in PulseAudio, for improving the server log messages when using pa_threaded_mainloop. The usefulness of this new function is probably very limited for applications.


### Performance improvements:

Improved float->s16 and s16->float sample conversion for ARM NEON.


### Bug fix highlights:

module-combine-sink doesn't crash any more when its virtual streams are destroyed (like when unloading the module). This was a regression in 4.0.

In the non-flat-volume mode we had a bug for a long time where stream volume was reset when moving the stream from one device to another. It's strange that this sort of bug in basic functionality has gone unnoticed (or at least unreported) for so long, but now it has been found and fixed.


## Next Steps

HSP/HFP support for BlueZ 5 will hopefully arrive in the next PulseAudio release, but that requires someone to write the code for that. Some code already exists, but it hasn't been submitted for upstream inclusion, and lately there has not been much visible progress on that front (TODO: check the latest status and plans from Jo√£o).


## git shortlog

<pre>
TODO: Output of "git shortlog v4.0..v5.0" goes here.
</pre>
