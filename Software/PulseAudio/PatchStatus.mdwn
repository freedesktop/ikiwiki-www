# Patch status

This page tracks the status of submitted patches that haven't been merged yet. The contents are updated at least once every two weeks, so very recently submitted patches may be missing. If something older is missing, please contact the maintainers (via the [mailing list](https://lists.freedesktop.org/mailman/listinfo/pulseaudio-discuss) or IRC). This list is new and still not finished, so it's known that the oldest GitLab merge requests and everything in Patchwork is still missing.

The patches have been ordered by priority, with the highest priority patches at the top. If your patch is low in the list, there's a real risk that it won't be reviewed at all, because patches are currently submitted at a higher rate than they are reviewed. This is a sad situation, and if you don't like it, please volunteer to become a reviewer!


* mainwindow: escape nameLabel
  * [[https://gitlab.freedesktop.org/pulseaudio/pavucontrol/merge_requests/24]]
  * Simple bugfix. It needs to be checked what g_markup_escape_text() does exactly (the patch submitter is worried about memory leaks). Or alternate fix: does set_text() exist that could be used instead of set_markup()?

* switch-on-connect: Add blacklisting
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/205]]
  * New feature. Pretty simple. Seems generally useful, and can be a base for fixing this release blocker bug: [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/issues/749]]

* derive PA_SYSTEM_RUNTIME_PATH from runstatedir
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/200]]
  * Simple patch. It needs to be checked whether the change actually makes sense. Also, does Meson need the same fix?

* raop: Allow channel map module argument
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/186]]
  * New feature. Simple change. It's unclear who actually needs this, but it's a good change nevertheless. If it's possible to configure the channel count, it should be possible to configure the channel map too.

* Messaging API v2
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/51]]
  * Implements new infrastructure that is expected to be used for many features in the future. Tanu has already reviewed some of the patches. Big change.

* [WIP][RFC] Ucm volume
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/189]]
  * Improves hardware support. Better UCM support will probably soon become important with new laptops. It seems that Intel is moving to non-HDA sound systems on consumer hardware. Hardware volume support is one missing piece in PulseAudio's UCM functionality but no means the only one. This MR contains a patch from Arun, which has been already reviewed, plus a patch from Jaska that fixes the issues found in Arun's patch, so only the fixes need to be reviewed. It would probably be good to split the fixes into multiple patches.

* Steelseries and Lucidsound gaming headset support
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/191]]
  * Improves hardware support. Pretty simple, although the reviewer needs to be careful to check that there are no unintended changes due to renaming stuff.

* pavuapplication: allow one window per server
  * [[https://gitlab.freedesktop.org/pulseaudio/pavucontrol/merge_requests/11]]
  * Fixes a regression when using pavucontrol with multiple servers. The patch probably needs to be completely rewritten, however, because mangling the bus name is an ugly hack.

* raop: Fix soft volume not applied on initial volume
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/190]]
  * Bugfix for an issue that sounds serious (unwanted 100% volume, pavucontrol shows wrong volume). One-liner, but checking that the change actually makes sense may take some effort.

* qpaeq: fix: resizing on HiDPI (!41)
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/41]]
  * Fixes infinite recalculations when resizing the qpaeq window on a HiDPI system. Pretty small change, but not trivial.

* raop: Improve volume management
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/129]]
  * Fixes unsynchronized volume updates (hw volume is updated immediately, soft volume takes 2 seconds to take effect). Very small code change.
  * Comment from Tanu: I suspect it's too simple. I think there should be two modes: either hardware volume, which is fast but doesn't allow different volumes for different channels, or soft volume, which is very slow but supports per-channel volumes. Then there's the question whether the hardware volume mode should support decibel volumes or not. Not supporting decibel volumes would have the benefit that UIs would show a continuous volume scale, whereas with decibel volumes the volume couldn't be set below 32% (which is -30dB, the minimum volume allowed by the protocol).

* Introduce meson-based build
  * [[https://gitlab.freedesktop.org/pulseaudio/pavucontrol/merge_requests/17]]
  * New feature. Medium sized change.

* Split the enable-lfe-remixing setting into two
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/199]]
  * New feature. Seems pretty simple, although the patch is not small.
  * Comment from Tanu: Good change, but I guess this doesn't affect very many people.

* WIP: Support of Airplay2 devices
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/194]]
  * Improves hardware support. 2 commits. Unfinished work. Not a small change, but not huge either.

* raop: Add autoreconnect feature
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/174]]
  * New feature. Contains bug fixes too, maybe those should be split out? Pretty large change. Hajime Fujita has already done some reviewing.
  * Comment from Tanu: Sounds like a good change overall, although it seems like module-raop-discover should be somehow involved in dealing with disappearing devices, and the autonull feature sounds like streams won't be moved away when the device becomes unavailable, which is bad. The autoreconnect feature is disabled by default, so in that sense this should be safe.

* Rewind and resampler fixes
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/120]]
  * Fixes crackling during volume changes caused by resampler resets. Big change.
  * Comment from Tanu: I started to review it, and I disagreed with Georg how the new history queue should be managed. I got demotivated due to the complexity of the code and Georg's unwillingness to accept my proposal that would make it easier for me to understand the system (according to Georg, my proposal is even more complex than his).

* Tunnel and combine-sink latency fixes
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/53]]
  * Fixes latency calculations. Adds a latency configuration modarg to module-tunnel. A somewhat large change, but it's split into 6 patches so the individual patches should be pretty manageable.

* WIP: Add a way to set the intended roles for mappings
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/71]]
  * This is supposed to make phone streams go automatically to the chat channel of the Arctis headsets, but the patch author reported that the routing isn't working even though the sink has the intended-roles property correctly set, which is why the patch is marked as WIP. The patch author didn't respond to Arun's question. The patch is pretty simple, and seems like a pretty good change, so it could be worth trying to reproduce the issue (by writing some custom configuration, intended roles could be tested without the Arctis headset).

* bluetooth: HFP profile implementation
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/94]]
  * Improves hardware support. HFP-only headsets can't currently be used without oFono, and using them with oFono is difficult. Apparently this patch was developed independently from James Bottomley's earlier implementation - what are the differences between the two implementations? Medium sized change.
  * The newest version (as of 2019-11-27) of James's patches are at [[https://git.kernel.org/pub/scm/linux/kernel/git/jejb/pulseaudio.git/log/?h=jejb-v13]]
  * There's also this version that has some improvements on top of James's patches: [[https://github.com/paravoid/pulseaudio/commits/hfp-v7]]

* Unload bluez5 devices when bluez5-discover is unloaded
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/42]]
  * Fixes a minor bug: when unloading module-bluez5-discover, the module-bluez5-device modules currently are left loaded. Pretty simple change.

* Added 3 columns (`mute-state`, `volume` and `default sink`) to output of `pactl list short sinks`.
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/159]]
  * New feature. Adds more information to "pactl list sinks short" (corresponding change for sources is missing). Pretty simple change.
  * Comment from Tanu: I'm not sure we want this - to make scripting easier, we could also add separate commands for getting the individual attributes.

* Permit root-owned home directory
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/134]]
  * New feature. Helps users with certain kind of NFS setups. One-liner, but checking that the change actually makes sense may take some effort.

* WIP: Virtual sink consolidation
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/88]]
  * Reduces code duplication in virtual sinks. The resampler rewind patches (!120) should be reviewed first, after which Georg will rebase these patches. Big change.

* WIP: virtual sinks/sources: Fix crash with stacked virtual sinks or sources
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/78]]
  * Crash fix. Arun has reviewed this, but the plan is to wait for the virtual sink consolidation patches (!88) to land first.

* WIP: Don't create card profile for unsupported Bluetooth profiles
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/50]]
  * Apparently fixes an issue of creating card profiles that aren't supported by the local bluetooth adapter. Marked as WIP, because the patches expose some bug in the kernel.
  * Comment from Tanu: I don't know what would be a concrete example of the problem, so it's hard to say how important this fix is.

* Loopback patches
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/56]]
  * Various improvements to module-loopback. How big improvements? Hard to say from a quick glance. As a whole it's a somewhat big change, but it's split into 10 patches, so individual patches aren't that big (but the math-heavy topic can make reviewing more difficult).

* Add alternative time smoother implementation
  * [[https://gitlab.freedesktop.org/pulseaudio/pulseaudio/merge_requests/55]]
  * Improves at least module-loopback's latency stability. Pretty large change, and probably math-heavy.
  * Comment from Tanu: Based on a quick glance at [[https://www.freedesktop.org/software/pulseaudio/misc/rate_estimator.odt]], the improvement is big in relative terms, but small in absolute terms (less than one millisecond).
