![gummiboot](gummiboot-icon.png)

# gummiboot Simple UEFI Boot Manager

gummiboot is a simple UEFI boot manager which executes configured EFI images. The default entry is selected by a configured pattern (glob) or an on-screen menu. 

gummiboot operates on the EFI System Partition (ESP) only. Configuration file fragments, kernels, initrds, other EFI images need to reside on the ESP. Linux kernels need to be built with CONFIG_EFI_STUB to be able to be directly executed as an EFI image. 

gummiboot reads simple and entirely generic boot loader configuration files; one file per boot loader entry to select from. All files need to reside on the ESP. 

Pressing the Space key (or most other keys actually work too) during bootup will show an on-screen menu with all configured loader entries to select from. Pressing Enter on the selected entry loads and starts the EFI image. 

If no timeout is configured, which is the default setting, and no key pressed during bootup, the default entry is executed right away. 

![gummiboot menu](gummiboot-menu2.png) 

All configuration files are expected to be 7-bit ASCII or valid UTF8. The loader configuration file understands the following keywords: 
[[!table header="no" class="mointable" data="""
configuration keywords |||
default  | pattern to select the default entry in the list of entries 
timeout  | timeout in seconds for how long to show the menu 
"""]]

The entry configuration files understand the following keywords: 
[[!table header="no" class="mointable" data="""
entry config keywords |||
title  | text to show in the menu 
version  |  version string to append to the title when the title is not unique 
machine-id  |  machine identifier to append to the title when the title is not unique 
efi  | executable EFI image 
options  | options to pass to the EFI image / kernel command line 
linux  | linux kernel image (gummiboot still requires the kernel to have an EFI stub) 
initrd  | initramfs image (gummiboot just adds this as option initrd=)
"""]]

Examples: 


[[!format txt """
/boot/loader/loader.conf
timeout 3
default 6a9857a393724b7a981ebb5b8495b9ea-*

/boot/loader/entries/6a9857a393724b7a981ebb5b8495b9ea-3.8.0-2.fc19.x86_64.conf
title      Fedora 19 (Rawhide)
version    3.8.0-2.fc19.x86_64
machine-id 6a9857a393724b7a981ebb5b8495b9ea
linux      /6a9857a393724b7a981ebb5b8495b9ea/3.8.0-2.fc19.x86_64/linux
initrd     /6a9857a393724b7a981ebb5b8495b9ea/3.8.0-2.fc19.x86_64/initrd
options    root=UUID=f8f83f73-df71-445c-87f7-31f70263b83b quiet

/boot/loader/entries/custom-kernel.conf
title      My kernel
efi        /bzImage
options    root=PARTUUID=084917b7-8be2-4e86-838d-f771a9902e08

/boot/loader/entries/custom-kernel-initrd.conf
title      My kernel with initrd
linux      /bzImage
initrd     /initrd.img
options    root=PARTUUID=084917b7-8be2-4e86-838d-f771a9902e08 quiet
"""]]
While the menu is shown, the following keys are active: 
[[!table header="no" class="mointable" data="""
keys |||
Up/Down  | Select menu entry 
Enter  | boot the selected entry 
d  | select the default entry to boot (stored in a non-volatile EFI variable) 
+/-  | adjust the timeout (stored in a non-volatile EFI variable) 
e  | edit the option line (kernel command line) for this bootup to pass to the EFI image 
q  | quit 
v  | show the gummiboot and UEFI version 
F1  | show key mapping 
"""]]

Some EFI variables control the loader or exported the loaders state to the started operating system. The vendor UUID `4a67b082-0a4c-41cf-b6c7-440b29bb8c4f` and the variable names are supposed to be shared across all loaders implementations which follow this scheme of configuration: 
[[!table header="no" class="mointable" data="""
EFI variables |||
LoaderEntryDefault  | entry identifier to select as default at bootup  | non-volatile 
LoaderConfigTimeout  | timeout in seconds to show the menu  | non-volatile 
LoaderEntryOneShot  | entry identifier to select at the next and only the next bootup  | non-volatile 
LoaderDeviceIdentifier  | list of identifiers of the volume the loader was started from  | volatile 
LoaderDevicePartUUID  | partition GPT UUID of the ESP gummiboot was executed from  | volatile 
LoaderEntryOptions-$machine-id  | options to append to the kernel command line for a specific machine  | non-volatile 
LoaderEntryOptionsOneShot-$machine-id  | options to append to the kernel command line for a specific machine, for the next and only the next bootup  | non-volatile 
LoaderEntrySelected  | identifier of the selected entry which was executed  | volatile 
!LoaderTimeInitUSec  | timestamp in milliseconds when the loader was initialized  | volatile 
!LoaderTimeStartMenuUSec  | timestamp in milliseconds when and if the menu was started  | volatile 
!LoaderTimeExecUSec  | timestamp in milliseconds when the selected EFI image was executed  | volatile 
LoaderInfo  | loader name and version  | volatile 
LoaderFirmwareInfo  | firmware vendor and version  | volatile 
LoaderFirmwareType  | firmware type: UEFI revision  | volatile 
"""]]

Git:

* [[http://cgit.freedesktop.org/gummiboot/|http://cgit.freedesktop.org/gummiboot/]]

Links:

* [[http://www.freedesktop.org/wiki/Software/systemd/BootLoaderInterface|http://www.freedesktop.org/wiki/Software/systemd/BootLoaderInterface]]
