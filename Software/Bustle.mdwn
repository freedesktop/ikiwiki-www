## Bustle <small>– someone's favourite D-Bus profiler</small>

<img src='https://gitlab.freedesktop.org/bustle/bustle/raw/master/data/appdata/bustle-diagram.png' width='774' height='424' alt="Bustle showing some D-Bus traffic" align=right>

Bustle is a better `dbus-monitor`. It records and draws sequence diagrams of
[D-Bus](https://dbus.freedesktop.org/) activity, showing signal emissions,
method calls and their corresponding returns, with timestamps for each
individual event and the duration of each method call. This can help you check
for unwanted D-Bus traffic, and pinpoint why your D-Bus-based application isn't
performing as well as you like. It also provides statistics like signal
frequencies and average method call times.

### Download

* The easiest way to install Bustle is from [**Flathub**](https://flathub.org/apps/details/org.freedesktop.Bustle)
* [Debian](https://packages.debian.org/source/sid/bustle),
  [Fedora](https://apps.fedoraproject.org/packages/bustle),
  [Gentoo](https://packages.gentoo.org/package/dev-util/bustle),
  or your favourite distribution may have a package
* Source code for releases is [here](https://www.freedesktop.org/software/bustle/?C=M;O=D)
  or on [Hackage](https://hackage.haskell.org/package/bustle)
* [Release notes](https://gitlab.freedesktop.org/bustle/bustle/blob/master/NEWS.md)

### Using Bustle

With luck, Bustle itself should be self-explanatory: run it, click the button
to record some D-Bus traffic, explore it, save or export the log.

If you want to record traffic without running the UI (maybe on an embedded
platform which doesn't have Gtk+ and/or a Haskell compiler), you can use the
stand-alone logger, which is just a C program:

    bustle-pcap logfile.bustle

You can then open `logfile.bustle` in Bustle.

You can also get some ASCII-art
version of the statistics shown in the UI:

    bustle --count logfile.bustle
    bustle --time logfile.bustle

#### Integration with other tools

* [DBus Test Runner](https://launchpad.net/dbus-test-runner) has built-in support for recording a Bustle log of your tests' D-Bus traffic.

### Development

The canonical Git repository is at
[gitlab.freedesktop.org](https://gitlab.freedesktop.org/bustle/bustle) with a mirror on
[GitHub](https://github.com/wjt/bustle).

Please [report bugs on gitlab.freedesktop.org](https://gitlab.freedesktop.org/bustle/bustle/issues/new).

You will need a C compiler, a [Haskell](https://www.haskell.org/) compiler and
many libraries. Try:

    cabal sandbox init
    cabal install alex happy gtk2hs-buildtools
    cabal install

To just build the C-only `bustle-pcap` logger, run `make`.

In new code, try to follow [this Haskell style
guide](https://github.com/tibbe/haskell-style-guide/blob/master/haskell-style.md).

Please send patches as [merge requests](https://gitlab.freedesktop.org/bustle/bustle/merge_requests/new).

### Credits

Bustle is written and maintained by [Will Thompson](https://willthompson.co.uk/) (originally
courtesy of [Collabora Ltd.](https://www.collabora.co.uk/)), with
contributions by Alex Merry, Arnaud Bonatti, Chris Lamb, Cosimo Alfarano,
Dafydd Harries, Lennart Poettering, Marc Kleine-Budde, Philip Withnall, Sergei
Trofimovich, Αποστολίδου Χρυσαφή, and Jonny Lamb.
It was originally inspired by a
[similar tool](http://alban.apinc.org/blog/2008/03/08/99-how-to-make-a-diagram-from-dbus-monitor-logs/)
by [Alban Crequy](http://alban.apinc.org/).
